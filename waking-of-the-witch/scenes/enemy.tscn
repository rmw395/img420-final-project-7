[gd_scene load_steps=15 format=3 uid="uid://c4xi8uan0s1nt"]

[ext_resource type="Texture2D" uid="uid://18x5852swo2u" path="res://icon.svg" id="1_7p1mj"]
[ext_resource type="Script" uid="uid://ql841nkiwba3" path="res://scripts/Enemy.cs" id="1_md0e3"]
[ext_resource type="Script" uid="uid://d1mx3v7so2wjy" path="res://scripts/EnemyBehaviorTree/Composites/BTSelector.cs" id="3_ipns3"]
[ext_resource type="Script" uid="uid://dxs0b5p4exlij" path="res://scripts/EnemyBehaviorTree/Composites/BTSequence.cs" id="4_8qclf"]
[ext_resource type="Script" uid="uid://6dvxbjhs4t5w" path="res://scripts/EnemyBehaviorTree/Conditions/BTIsHealthCritical.cs" id="5_w8i8w"]
[ext_resource type="Script" uid="uid://chmnhlb76pqs5" path="res://scripts/EnemyBehaviorTree/Actions/BTFlee.cs" id="6_otmr2"]
[ext_resource type="Script" uid="uid://cnwggxex2mcuy" path="res://scripts/EnemyBehaviorTree/Conditions/BTIsPlayerInRange.cs" id="7_wtq4b"]
[ext_resource type="Script" uid="uid://cy11a2fyg5qra" path="res://scripts/EnemyBehaviorTree/Conditions/BTCanAttack.cs" id="8_8qclf"]
[ext_resource type="Script" uid="uid://cp4rxte5y2pmk" path="res://scripts/EnemyBehaviorTree/Actions/BTAttack.cs" id="8_j0cyh"]
[ext_resource type="Script" uid="uid://cylbgpxwavk8w" path="res://scripts/EnemyBehaviorTree/Actions/BTChasePlayer.cs" id="9_g0wcc"]
[ext_resource type="Script" uid="uid://c2fvd2rbxcrv7" path="res://scripts/EnemyBehaviorTree/Actions/BTStandby.cs" id="11_w8i8w"]

[sub_resource type="CircleShape2D" id="CircleShape2D_md0e3"]
radius = 13.0384

[sub_resource type="CircleShape2D" id="CircleShape2D_4ra3w"]
radius = 469.18

[sub_resource type="CircleShape2D" id="CircleShape2D_5uy6h"]
radius = 113.004

[node name="Enemy" type="Entity"]
base_max_speed = 50.0
script = ExtResource("1_md0e3")

[node name="Sprite2D" type="Sprite2D" parent="."]
scale = Vector2(0.2, 0.2)
texture = ExtResource("1_7p1mj")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_md0e3")

[node name="DetectionArea" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="DetectionArea"]
shape = SubResource("CircleShape2D_4ra3w")

[node name="AttackArea" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="AttackArea"]
shape = SubResource("CircleShape2D_5uy6h")

[node name="BehaviorTree" type="Node" parent="."]
script = ExtResource("3_ipns3")

[node name="EmergencyFlee" type="Node" parent="BehaviorTree"]
script = ExtResource("4_8qclf")

[node name="IsHeathCritical" type="Node" parent="BehaviorTree/EmergencyFlee"]
script = ExtResource("5_w8i8w")

[node name="Flee" type="Node" parent="BehaviorTree/EmergencyFlee"]
script = ExtResource("6_otmr2")

[node name="Combat" type="Node" parent="BehaviorTree"]
script = ExtResource("4_8qclf")

[node name="IsPlayerDetected" type="Node" parent="BehaviorTree/Combat"]
script = ExtResource("7_wtq4b")

[node name="CombatOptions" type="Node" parent="BehaviorTree/Combat"]
script = ExtResource("3_ipns3")

[node name="AttackSequence" type="Node" parent="BehaviorTree/Combat/CombatOptions"]
script = ExtResource("4_8qclf")

[node name="IsPlayerInAttackRange" type="Node" parent="BehaviorTree/Combat/CombatOptions/AttackSequence"]
script = ExtResource("7_wtq4b")

[node name="CanAttack" type="Node" parent="BehaviorTree/Combat/CombatOptions/AttackSequence"]
script = ExtResource("8_8qclf")

[node name="Attack" type="Node" parent="BehaviorTree/Combat/CombatOptions/AttackSequence"]
script = ExtResource("8_j0cyh")

[node name="ChaseSequence" type="Node" parent="BehaviorTree/Combat/CombatOptions"]
script = ExtResource("4_8qclf")

[node name="Chase" type="Node" parent="BehaviorTree/Combat/CombatOptions/ChaseSequence"]
script = ExtResource("9_g0wcc")

[node name="StandbySequence" type="Node" parent="BehaviorTree"]
script = ExtResource("4_8qclf")

[node name="Standby" type="Node" parent="BehaviorTree/StandbySequence"]
script = ExtResource("11_w8i8w")
